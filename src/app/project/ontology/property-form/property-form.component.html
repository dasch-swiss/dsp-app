<!-- content: Step 1 = define resource class -->
<!-- <form [formGroup]="propertyForm"
-->
<form [formGroup]="propertyForm" class="form-content" *ngIf="!loading">

    <div class="center more-space-top">

        <!-- label -->
        <div class="large-field string-literal-container">
            <dsp-string-literal-input [placeholder]="'Label *'" [value]="propertyInfo.propDef?.labels"
                (dataChanged)="handleData($event, 'labels')">
            </dsp-string-literal-input>
            <mat-hint class="string-literal-error" *ngIf="formErrors.label">
                {{ formErrors.label }}
            </mat-hint>
        </div>

        <!-- comment/description -->
        <div class="large-field string-literal-container more-space-top">
            <dsp-string-literal-input [placeholder]="'Comment *'" [value]="propertyInfo.propDef.comments"
                [textarea]="true" (dataChanged)="handleData($event, 'comments')"></dsp-string-literal-input>
        </div>

        <!-- property type -->
        <mat-form-field *ngIf="propertyInfo.propType" class="large-field property-type more-space-top">
            <span matPrefix class="property-type-icon">
                <mat-icon>{{propertyInfo.propType?.icon}}</mat-icon>&nbsp;
            </span>
                <mat-label>Property type</mat-label>
                <input matInput [value]="propertyInfo.propType.group + ': ' + propertyInfo.propType.label" [disabled]="true">
        </mat-form-field>

        <!-- depending on type: display gui attribute -->
        <div *ngIf="showGuiAttr" [ngSwitch]="propertyInfo.propType.objectType">
            <mat-form-field class="large-field property-type" *ngSwitchCase="dspConstants.ListValue">
                <span matPrefix class="property-type-icon">
                    <mat-icon>{{guiAttrIcon}}</mat-icon>&nbsp;
                </span>
                <mat-label>Select list</mat-label>
                <mat-select formControlName="guiAttr">
                    <mat-option *ngFor="let item of lists" [value]="item.id">
                        {{item.labels[0].value}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="large-field property-type" *ngSwitchCase="dspConstants.LinkValue">
                <span matPrefix class="property-type-icon">
                    <mat-icon>{{guiAttrIcon}}</mat-icon>&nbsp;
                </span>
                <mat-label>Select resource class</mat-label>
                <mat-select formControlName="guiAttr">
                    <mat-option *ngFor="let item of resourceClass" [value]="item.id">
                        {{item.label}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <!-- the gui-attribute for integer and decimal are not yet supported in the app -->
            <mat-form-field class="large-field property-type"
                *ngSwitchCase="propertyInfo.propType.objectType === dspConstants.IntValue || propertyInfo.propType.objectType === dspConstants.DecimalValue">
                <span matPrefix class="property-type-icon">
                    <mat-icon>{{guiAttrIcon}}</mat-icon>&nbsp;
                </span>
                <mat-label>Define range</mat-label>
                <input matInput placeholder="min">
                <input matInput placeholder="max">
                <!-- <mat-select formControlName="guiAttr">
                            <mat-option *ngFor="let item of resourceClass" [value]="item.id">
                                {{item.label}}
                            </mat-option>
                        </mat-select> -->
            </mat-form-field>

            <!-- <div *ngSwitchDefault>{{propertyInfo.propType.subPropOf}} not yet implemented</div> -->
        </div>

    </div>

    <!-- action buttons -->
    <div class="form-panel form-action">
        <button mat-button type="button" (click)="closeDialog.emit()">
            {{ 'appLabels.form.action.cancel' | translate }}
        </button>
        <span class="fill-remaining-space"></span>
        <button mat-raised-button type="button" color="primary" [disabled]="!labels.length || !comments.length"
            (click)="submitData()">
            <dsp-progress-indicator [color]="'white'" [status]="0" *ngIf="loading" class="submit-progress">
            </dsp-progress-indicator>
            <mat-icon *ngIf="error && !loading">close</mat-icon>
            {{error ? 'Failed' : (edit ? 'Update' : 'Save')}}
        </button>
    </div>
</form>
<!-- </form> -->
